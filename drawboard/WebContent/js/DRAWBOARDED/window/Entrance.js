/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["window.Entrance"]){dojo._hasResource["window.Entrance"]=true;dojo.provide("window.Entrance");dojo.require("common.calc.Geometry");dojo.require("drawboard.DrawBoard");dojo.require("drawboard.ZoomDrawBoard");dojo.require("common.utils.BrowerUtils");dojo.require("drawboard.graphic.SVGGraphic");dojo.require("drawboard.graphic.VMLGraphic");dojo.require("drawboard.graphic.CanvasGraphic");dojo.require("window.widget.GraphChooseContainer");dojo.require("window.widget.Toolbar");(function(){var _1=common.calc.Geometry,_2=_1.rotation;window.Entrance={graphic:null,db:null,graphicClass:null,test:function(){var _3=common.utils.BrowerUtils.getBrowerType(),_4=_3.ie,_5=drawboard.graphic.SVGGraphic;if(_4){_4=_4.substr(0,1);if(_4=="8"||_4=="7"||_4=="6"||_4=="5"){_5=drawboard.graphic.VMLGraphic;}}this.graphicClass=_5;this.graphic=new _5();this.testGraphClassPanel();this.ready();},ready:function(){if(this.db.ready()){this.db.draw();return;}setTimeout(dojo.hitch(this,"ready"),300);},createDrawboard:function(){var db=this.db,_6=common.utils.BrowerUtils.getWindowBox(),_7,_8=document.getElementById("graphNode");if(!db){_7=dojo.create("div",{},dojo.byId("graphNode"));_7.style.width=_6.w-212+"px";_7.style.height=_6.h-39+"px";_7.style.border="1px solid black";this.db=new drawboard.DrawBoard({w:(_6.w-212),h:(_6.h-39),graphicClass:this.graphicClass,_graphic:this.graphic,fixNode:_8},dojo.create("div",null,_7));}return this.db;},getZoomWindow:function(){if(!this.zoomWindow){var _9=common.utils.BrowerUtils.getWindowBox(),db=this.createDrawboard(),_a=dojo.create("div",{},dojo.byId("graphNode"),"last");_a.style.height=db.h*0.5+4+"px";_a.style.width=db.w*0.5+4+"px";_a.style.border="1px solid black";_a.style.position="relative";this.zoomWindow=new drawboard.ZoomDrawBoard({drawboard:db,w:db.w*0.5,h:db.h*0.5},dojo.create("div",{},_a));}return this.zoomWindow;},testGraphClassPanel:function(){var _b=common.utils.BrowerUtils.getWindowBox(),_c,_d,db;dojo.byId("graphNode").style.width=(_b.w-212)+"px";dojo.byId("graphNode").style.height=(_b.h-30)+"px";_c=new window.widget.GraphChooseContainer({width:"212px",height:(_b.h-30)+"px"},dojo.create("div",null,dojo.byId("toolsNode")));_d=new window.widget.Toolbar({},dojo.create("div",null,dojo.byId("navigator")));db=this.db=this.createDrawboard();_c.setDrawboard(db);_d.drawboard=db;}};})();}