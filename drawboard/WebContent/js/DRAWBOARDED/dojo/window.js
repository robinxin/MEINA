/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\r\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\r\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\r\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\r\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\r\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\r\n\t\t</div>\r\n\t</td>\r\n</tr>\r\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_1){if(_1&&!("label" in this.params)){this.set("label",_1.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _2=this.id+"_text";dojo.attr(this.containerNode,"id",_2);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_2+=" "+this.id+"_accel";}dijit.setWaiState(this.domNode,"labelledby",_2);dojo.setSelectable(this.domNode,false);},_onHover:function(){this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);},_onClick:function(_3){this.getParent().onItemClick(this,_3);dojo.stopEvent(_3);},onClick:function(_4){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_5){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_5);},setLabel:function(_6){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_6);},setDisabled:function(_7){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_7);},_setDisabledAttr:function(_8){dijit.setWaiState(this.focusNode,"disabled",_8?"true":"false");this._set("disabled",_8);},_setAccelKeyAttr:function(_9){this.accelKeyNode.style.display=_9?"":"none";this.accelKeyNode.innerHTML=_9;dojo.attr(this.containerNode,"colSpan",_9?"1":"2");this._set("accelKey",_9);}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_a[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var _b=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(_b);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\r\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\r\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\r\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\r\n</tr>\r\n"),checked:false,_setCheckedAttr:function(_c){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_c);dijit.setWaiState(this.domNode,"checked",_c);this._set("checked",_c);},onChange:function(_d){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\r\n\t<td class=\"dijitMenuSeparatorIconCell\">\r\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\r\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\r\n\t</td>\r\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\r\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\r\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\r\n\t</td>\r\n</tr>\r\n"),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_e){_e.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_f){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _10=this._getTopMenu();if(_10&&_10._isMenuBar){_10.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _11=this.currentPopup.parentMenu;if(_11.focusedChild){_11.focusedChild._setSelected(false);}_11.focusedChild=this.currentPopup.from_item;_11.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(_12){if(this.isActive){this.focusChild(_12);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(_12);}this._hoveredChild=_12;},_onChildBlur:function(_13){this._stopPopupTimer();_13._setSelected(false);var _14=_13.popup;if(_14){this._stopPendingCloseTimer(_14);_14._pendingClose_timer=setTimeout(function(){_14._pendingClose_timer=null;if(_14.parentMenu){_14.parentMenu.currentPopup=null;}dijit.popup.close(_14);},this.popupDelay);}},onItemUnhover:function(_15){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==_15){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_16){if(_16._pendingClose_timer){clearTimeout(_16._pendingClose_timer);_16._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_17,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(_17);if(_17.disabled){return false;}if(_17.popup){this._openPopup();}else{this.onExecute();_17.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _18=this.focusedChild;if(!_18){return;}var _19=_18.popup;if(_19.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_19.parentMenu=this;_19.from_item=_18;var _1a=this;dijit.popup.open({parent:this,popup:_19,around:_18.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){_1a.focusChild(_18);_1a._cleanUp();_18._setSelected(true);_1a.focusedChild=_18;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_19;_19.connect(_19.domNode,"onmouseenter",dojo.hitch(_1a,"_onPopupHover"));if(_19.focus){_19._focus_timer=setTimeout(dojo.hitch(_19,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();var _1b=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)){this.focusedChild.focusNode.focus();}dijit.popup.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}},_onItemFocus:function(_1c){if(this._hoveredChild&&this._hoveredChild!=_1c){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\r\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\r\n</table>\r\n"),baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_1d){var win=dojo.window.get(this._iframeContentDocument(_1d))||this._iframeContentDocument(_1d)["__parent__"]||(_1d.name&&dojo.doc.frames[_1d.name])||null;return win;},_iframeContentDocument:function(_1e){var doc=_1e.contentDocument||(_1e.contentWindow&&_1e.contentWindow.document)||(_1e.name&&dojo.doc.frames[_1e.name]&&dojo.doc.frames[_1e.name].document)||null;return doc;},bindDomNode:function(_1f){_1f=dojo.byId(_1f);var cn;if(_1f.tagName.toLowerCase()=="iframe"){var _20=_1f,win=this._iframeContentWindow(_20);cn=dojo.withGlobal(win,dojo.body);}else{cn=(_1f==dojo.body()?dojo.doc.documentElement:_1f);}var _21={node:_1f,iframe:_20};dojo.attr(_1f,"_dijitMenu"+this.id,this._bindings.push(_21));var _22=dojo.hitch(this,function(cn){return [dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_20,{x:evt.pageX,y:evt.pageY});}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_20);}})];});_21.connects=cn?_22(cn):[];if(_20){_21.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_20);cn=dojo.withGlobal(win,dojo.body);_21.connects=_22(cn);});if(_20.addEventListener){_20.addEventListener("load",_21.onloadHandler,false);}else{_20.attachEvent("onload",_21.onloadHandler);}}},unBindDomNode:function(_23){var _24;try{_24=dojo.byId(_23);}catch(e){return;}var _25="_dijitMenu"+this.id;if(_24&&dojo.hasAttr(_24,_25)){var bid=dojo.attr(_24,_25)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _26=b.iframe;if(_26){if(_26.removeEventListener){_26.removeEventListener("load",b.onloadHandler,false);}else{_26.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(_24,_25);delete this._bindings[bid];}},_scheduleOpen:function(_27,_28,_29){if(!this._openTimer){this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:_27,iframe:_28,coords:_29});}),1);}},_openMyself:function(_2a){var _2b=_2a.target,_2c=_2a.iframe,_2d=_2a.coords;if(_2d){if(_2c){var od=_2b.ownerDocument,ifc=dojo.position(_2c,true),win=this._iframeContentWindow(_2c),_2e=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_2c),tp=dojo._toPixelValue,_2f=(dojo.isIE&&dojo.isQuirks?0:tp(_2c,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_2c,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_2c,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_2c,cs.borderTopWidth):0);_2d.x+=ifc.x+_2f-_2e.x;_2d.y+=ifc.y+top-_2e.y;}}else{_2d=dojo.position(_2b,true);_2d.x+=10;_2d.y+=10;}var _30=this;var _31=dijit.getFocus(this);function _32(){if(_30.refocus){dijit.focus(_31);}dijit.popup.close(_30);};dijit.popup.open({popup:this,x:_2d.x,y:_2d.y,onExecute:_32,onCancel:_32,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.getObject("dnd",true,dojo);dojo.dnd.getViewport=dojo.window.getBox;dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.window.getBox(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft;ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _33=n.scrollLeft,_34=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_33!=n.scrollLeft||_34!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(_35,e,_36){this.node=dojo.byId(_35);var pos=e.touches?e.touches[0]:e;this.marginBox={l:pos.pageX,t:pos.pageY};this.mouseButton=e.button;var h=(this.host=_36),d=_35.ownerDocument;this.events=[dojo.connect(d,"onmousemove",this,"onFirstMove"),dojo.connect(d,"ontouchmove",this,"onFirstMove"),dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"ontouchmove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ontouchend",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent)];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,pos=e.touches?e.touches[0]:e;this.host.onMove(this,{l:m.l+pos.pageX,t:m.t+pos.pageY},e);dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}dojo.disconnect(this.events.shift());dojo.disconnect(this.events.shift());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(_37,_38){this.node=dojo.byId(_37);if(!_38){_38={};}this.handle=_38.handle?dojo.byId(_38.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_38.delay>0?_38.delay:0;this.skip=_38.skip;this.mover=_38.mover?_38.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ontouchstart",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_39,_3a){return new dojo.dnd.Moveable(_3a,_39);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"ontouchmove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"),dojo.connect(this.handle,"ontouchend",this,"onMouseUp"));var pos=e.touches?e.touches[0]:e;this._lastX=pos.pageX;this._lastY=pos.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){var pos=e.touches?e.touches[0]:e;if(Math.abs(pos.pageX-this._lastX)>this.delay||Math.abs(pos.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_3b){dojo.publish("/dnd/move/start",[_3b]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_3c){dojo.publish("/dnd/move/stop",[_3c]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_3d,e){},onMove:function(_3e,_3f,e){this.onMoving(_3e,_3f);var s=_3e.node.style;s.left=_3f.l+"px";s.top=_3f.t+"px";this.onMoved(_3e,_3f);},onMoving:function(_40,_41){},onMoved:function(_42,_43){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_44,_45){return new dojo.dnd.move.constrainedMoveable(_45,_44);},constructor:function(_46,_47){if(!_47){_47={};}this.constraints=_47.constraints;this.within=_47.within;},onFirstMove:function(_48){var c=this.constraintBox=this.constraints.call(this,_48);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo._getMarginSize(_48.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_49,_4a){var c=this.constraintBox,s=_49.node.style;this.onMoving(_49,_4a);_4a.l=_4a.l<c.l?c.l:c.r<_4a.l?c.r:_4a.l;_4a.t=_4a.t<c.t?c.t:c.b<_4a.t?c.b:_4a.t;s.left=_4a.l+"px";s.top=_4a.t+"px";this.onMoved(_49,_4a);}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_4b,_4c){return new dojo.dnd.move.boxConstrainedMoveable(_4c,_4b);},constructor:function(_4d,_4e){var box=_4e&&_4e.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_4f,_50){return new dojo.dnd.move.parentConstrainedMoveable(_50,_4f);},constructor:function(_51,_52){var _53=_52&&_52.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(_53=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(_53=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(_53=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _54=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(_55,_56){if(!_56){_56={};}if(_56.timeout&&typeof _56.timeout=="number"&&_56.timeout>=0){this.timeout=_56.timeout;}},markupFactory:function(_57,_58){return new dojo.dnd.TimedMoveable(_58,_57);},onMoveStop:function(_59){if(_59._timer){clearTimeout(_59._timer);_54.call(this,_59,_59._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_5a,_5b){_5a._leftTop=_5b;if(!_5a._timer){var _5c=this;_5a._timer=setTimeout(function(){_5a._timer=null;_54.call(_5c,_5a,_5a._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(_5d){var _5e=this;dojo.mixin(_5e,_5d);_5e.node=_5d.node;_5e._showArgs=dojo.mixin({},_5d);_5e._showArgs.node=_5e.node;_5e._showArgs.duration=_5e.showDuration;_5e.showAnim=_5e.showFunc(_5e._showArgs);_5e._hideArgs=dojo.mixin({},_5d);_5e._hideArgs.node=_5e.node;_5e._hideArgs.duration=_5e.hideDuration;_5e.hideAnim=_5e.hideFunc(_5e._hideArgs);dojo.connect(_5e.showAnim,"beforeBegin",dojo.hitch(_5e.hideAnim,"stop",true));dojo.connect(_5e.hideAnim,"beforeBegin",dojo.hitch(_5e.showAnim,"stop",true));},show:function(_5f){return this.showAnim.play(_5f||0);},hide:function(_60){return this.hideAnim.play(_60||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_61={_fire:function(evt,_62){if(this[evt]){this[evt].apply(this,_62||[]);}return this;}};var _63=function(_64){this._index=-1;this._animations=_64||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_63,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_65,_66){if(!this._current){this._current=this._animations[this._index=0];}if(!_66&&this._current.status()=="playing"){return this;}var _67=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_68=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_69=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_67);d.disconnect(_68);d.disconnect(_69);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_6a,_6b){this.pause();var _6c=this.duration*_6a;this._current=null;d.some(this._animations,function(a){if(a.duration<=_6c){this._current=a;return true;}_6c-=a.duration;return false;});if(this._current){this._current.gotoPercent(_6c/this._current.duration,_6b);}return this;},stop:function(_6d){if(this._current){if(_6d){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_63,_61);dojo.fx.chain=function(_6e){return new _63(_6e);};var _6f=function(_70){this._animations=_70||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_70,function(a){var _71=a.duration;if(a.delay){_71+=a.delay;}if(this.duration<_71){this.duration=_71;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var _72=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){_72._connects.push(d.connect(_72._pseudoAnimation,evt,function(){_72._fire(evt,arguments);}));});};d.extend(_6f,{_doAction:function(_73,_74){d.forEach(this._animations,function(a){a[_73].apply(a,_74);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_75,_76){var t=this._pseudoAnimation;t[_75].apply(t,_76);},play:function(_77,_78){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_79,_7a){var ms=this.duration*_79;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_7a);});this._call("gotoPercent",arguments);return this;},stop:function(_7b){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_6f,_61);dojo.fx.combine=function(_7c){return new _6f(_7c);};dojo.fx.wipeIn=function(_7d){var _7e=_7d.node=d.byId(_7d.node),s=_7e.style,o;var _7f=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _80=d.style(_7e,"height");return Math.max(_80,1);}},end:function(){return _7e.scrollHeight;}}}},_7d));d.connect(_7f,"onEnd",function(){s.height="auto";s.overflow=o;});return _7f;};dojo.fx.wipeOut=function(_81){var _82=_81.node=d.byId(_81.node),s=_82.style,o;var _83=d.animateProperty(d.mixin({properties:{height:{end:1}}},_81));d.connect(_83,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(_83,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return _83;};dojo.fx.slideTo=function(_84){var _85=_84.node=d.byId(_84.node),top=null,_86=null;var _87=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);_86=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;_86=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=_86+"px";}};})(_85);_87();var _88=d.animateProperty(d.mixin({properties:{top:_84.top||0,left:_84.left||0}},_84));d.connect(_88,"beforeBegin",_88,_87);return _88;};})();}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{state:"",reset:function(){dojo.forEach(this.getDescendants(),function(_89){if(_89.reset){_89.reset();}});},validate:function(){var _8a=false;return dojo.every(dojo.map(this.getDescendants(),function(_8b){_8b._hasBeenBlurred=true;var _8c=_8b.disabled||!_8b.validate||_8b.validate();if(!_8c&&!_8a){dojo.window.scrollIntoView(_8b.containerNode||_8b.domNode);_8b.focus();_8a=true;}return _8c;}),function(_8d){return _8d;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_8e){if(!_8e.name){return;}var _8f=map[_8e.name]||(map[_8e.name]=[]);_8f.push(_8e);});for(var _90 in map){if(!map.hasOwnProperty(_90)){continue;}var _91=map[_90],_92=dojo.getObject(_90,false,obj);if(_92===undefined){continue;}if(!dojo.isArray(_92)){_92=[_92];}if(typeof _91[0].checked=="boolean"){dojo.forEach(_91,function(w,i){w.set("value",dojo.indexOf(_92,w.value)!=-1);});}else{if(_91[0].multiple){_91[0].set("value",_92);}else{dojo.forEach(_91,function(w,i){w.set("value",_92[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_93){var _94=_93.name;if(!_94||_93.disabled){return;}var _95=_93.get("value");if(typeof _93.checked=="boolean"){if(/Radio/.test(_93.declaredClass)){if(_95!==false){dojo.setObject(_94,_95,obj);}else{_95=dojo.getObject(_94,false,obj);if(_95===undefined){dojo.setObject(_94,null,obj);}}}else{var ary=dojo.getObject(_94,false,obj);if(!ary){ary=[];dojo.setObject(_94,ary,obj);}if(_95!==false){ary.push(_95);}}}else{var _96=dojo.getObject(_94,false,obj);if(typeof _96!="undefined"){if(dojo.isArray(_96)){_96.push(_95);}else{dojo.setObject(_94,[_96,_95],obj);}}else{dojo.setObject(_94,_95,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(_97){},_getState:function(){var _98=dojo.map(this._descendants,function(w){return w.get("state")||"";});return dojo.indexOf(_98,"Error")>=0?"Error":dojo.indexOf(_98,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){dojo.forEach(this._childConnections||[],dojo.hitch(this,"disconnect"));dojo.forEach(this._childWatches||[],function(w){w.unwatch();});},connectChildren:function(_99){var _9a=this;this.disconnectChildren();this._descendants=this.getDescendants();var set=_99?function(_9b,val){_9a[_9b]=val;}:dojo.hitch(this,"_set");set("value",this.get("value"));set("state",this._getState());var _9c=(this._childConnections=[]),_9d=(this._childWatches=[]);dojo.forEach(dojo.filter(this._descendants,function(_9e){return _9e.validate;}),function(_9f){dojo.forEach(["state","disabled"],function(_a0){_9d.push(_9f.watch(_a0,function(_a1,_a2,_a3){_9a.set("state",_9a._getState());}));});});var _a4=function(){if(_9a._onChangeDelayTimer){clearTimeout(_9a._onChangeDelayTimer);}_9a._onChangeDelayTimer=setTimeout(function(){delete _9a._onChangeDelayTimer;_9a._set("value",_9a.get("value"));},10);};dojo.forEach(dojo.filter(this._descendants,function(_a5){return _a5.onChange;}),function(_a6){_9c.push(_9a.connect(_a6,"onChange",_a4));_9d.push(_a6.watch("disabled",_a4));});},startup:function(){this.inherited(arguments);this.connectChildren(true);this.watch("state",function(_a7,_a8,_a9){this.onValidStateChange(_a9=="");});},destroy:function(){this.disconnectChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_aa){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var _ab=dijit._getTabNavigable(this.containerNode);this._firstFocusItem=_ab.lowest||_ab.first||this.closeButtonNode||this.domNode;this._lastFocusItem=_ab.last||_ab.highest||this._firstFocusItem;}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_ac){this.node.className="dijitDialogUnderlay "+_ac;this._set("class",_ac);},postCreate:function(){dojo.body().appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _ad=dojo.window.getBox();os.top=_ad.t+"px";os.left=_ad.l+"px";is.width=_ad.w+"px";is.height=_ad.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html","<div role=\"presentation\" tabIndex=\"-1\">\r\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\r\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" role=\"dialog\"></div>\r\n\t</div>\r\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\"></div>\r\n</div>\r\n"),_setTitleAttr:function(_ae){this.containerNode.title=_ae;this._set("title",_ae);},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");},orient:function(_af,_b0,_b1){var _b2="dijitTooltipAB"+(_b1.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_b1.charAt(0)=="T"?"Below":"Above");dojo.replaceClass(this.domNode,_b2,this._currentOrientClass||"");this._currentOrientClass=_b2;},focus:function(){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){var _b3=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _b4=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt);}else{if(_b3==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_b4){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(_b3==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_b4){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\r\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\r\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\r\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\r\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\r\n\t</span>\r\n\t</div>\r\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\r\n</div>\r\n"),baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _b5=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_b5);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=dojo.position(e.node);}},_setup:function(){var _b6=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(_b6,{handle:this.titleBar}):new dojo.dnd.Moveable(_b6,{handle:this.titleBar,timeout:0});this._dndListener=dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(_b6,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{dojo.style(this.containerNode,{width:"auto",height:"auto"});}var mb=dojo._getMarginSize(this.domNode);var _b7=dojo.window.getBox();if(mb.w>=_b7.w||mb.h>=_b7.h){var w=Math.min(mb.w,Math.floor(_b7.w*0.75)),h=Math.min(mb.h,Math.floor(_b7.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var _b8=this.domNode,_b9=dojo.window.getBox(),p=this._relativePosition,bb=p?null:dojo._getBorderBox(_b8),l=Math.floor(_b9.l+(p?p.x:(_b9.w-bb.w)/2)),t=Math.floor(_b9.t+(p?p.y:(_b9.h-bb.h)/2));dojo.style(_b8,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var _ba=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _bb=(this._firstFocusItem==this._lastFocusItem);if(_ba==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_bb){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(_ba==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_bb){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(_ba){if(_ba==this.domNode||dojo.hasClass(_ba,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}_ba=_ba.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _bc=dojo.window.getBox();if(!this._oldViewport||_bc.h!=this._oldViewport.h||_bc.w!=this._oldViewport.w){this.layout();this._oldViewport=_bc;}}));this._modalconnects.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _bd;this._fadeInDeferred=new dojo.Deferred(dojo.hitch(this,function(){_bd.stop();delete this._fadeInDeferred;}));_bd=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){dijit._DialogLevelManager.show(this,this.underlayAttrs);}),onEnd:dojo.hitch(this,function(){if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this._fadeInDeferred.callback(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _be;this._fadeOutDeferred=new dojo.Deferred(dojo.hitch(this,function(){_be.stop();delete this._fadeOutDeferred;}));_be=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";dijit._DialogLevelManager.hide(this);this.onHide();this._fadeOutDeferred.callback(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay){dijit._underlay.layout();}this._position();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}if(this._dndListener){dojo.unsubscribe(this._dndListener);}dojo.forEach(this._modalconnects,dojo.disconnect);dijit._DialogLevelManager.hide(this);this.inherited(arguments);}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._DialogLevelManager={show:function(_bf,_c0){var ds=dijit._dialogStack;ds[ds.length-1].focus=dijit.getFocus(_bf);var _c1=dijit._underlay;if(!_c1||_c1._destroyed){_c1=dijit._underlay=new dijit.DialogUnderlay(_c0);}else{_c1.set(_bf.underlayAttrs);}var _c2=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:950;if(ds.length==1){_c1.show();}dojo.style(dijit._underlay.domNode,"zIndex",_c2-1);dojo.style(_bf.domNode,"zIndex",_c2);ds.push({dialog:_bf,underlayAttrs:_c0,zIndex:_c2});},hide:function(_c3){var ds=dijit._dialogStack;if(ds[ds.length-1].dialog==_c3){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){if(!dijit._underlay._destroyed){dijit._underlay.hide();}}else{dojo.style(dijit._underlay.domNode,"zIndex",pd.zIndex-1);dijit._underlay.set(pd.underlayAttrs);}if(_c3.refocus){var _c4=pd.focus;if(!_c4||(pd.dialog&&!dojo.isDescendant(_c4.node,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);_c4=pd.dialog._firstFocusItem;}try{dijit.focus(_c4);}catch(e){}}}else{var idx=dojo.indexOf(dojo.map(ds,function(_c5){return _c5.dialog;}),_c3);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_c6){var ds=dijit._dialogStack;return ds[ds.length-1].dialog==_c6;}};dijit._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];}if(!dojo._hasResource["common.widget.CommonDialogue"]){dojo._hasResource["common.widget.CommonDialogue"]=true;dojo.provide("common.widget.CommonDialogue");dojo.declare("common.widget.CommonDialogue",null,{dialogue:null,buttons:null,visible4Cancel:true,visible4OK:true,OKLabel:"确认",CancelLabel:"取消",okBtn:null,cancelBtn:null,contentCss:"DialogContent",title:null,warning:null,errCss:"DialogError",footCss:"DialogFoot",errorObj:null,constructor:function(_c7){if(_c7){dojo.mixin(this,_c7);}},postCreate:function(){this.createDialogue();},createDialogue:function(){var _c8=document.createElement("div");if(this.contentCss){dojo.addClass(_c8,this.contentCss);}var _c9=document.createElement("div");dojo.attr(_c9,"style","overflow:auto;");_c9.appendChild(this.createContent());_c8.appendChild(_c9);_c8.appendChild(this.createFoot());this.dialogue=new dijit.Dialog({title:this.title,style:"overflow:visible;outline:none;"},_c8);dojo.connect(this.dialogue,"onCancel",dojo.hitch(this,"onCancel"));dojo.connect(this.dialogue.domNode,"onkeypress",dojo.hitch(this,"onKeyPress"));},createContent:function(){},createFoot:function(){var _ca=document.createElement("div");dojo.addClass(_ca,this.footCss);var _cb=document.createElement("div");dojo.addClass(_cb,this.errCss);this.errorObj=_cb;this.hidWarn();_ca.appendChild(_cb);if(this.visible4OK){var _cc=new dijit.form.Button({label:this.OKLabel});_ca.appendChild(_cc.domNode);dojo.connect(_cc,"onClick",dojo.hitch(this,"onOK"));this.okBtn=_cc;}if(this.visible4Cancel){var _cd=new dijit.form.Button({label:this.CancelLabel});_ca.appendChild(_cd.domNode);dojo.connect(_cd,"onClick",dojo.hitch(this,"onCancel"));this.cancelBtn=_cd;}if(this.buttons){dojo.forEach(this.buttons,function(_ce){var btn=new dijit.form.Button({label:_ce.label});_ca.appendChild(btn.domNode);if(_ce.clickFunction){dojo.connect(btn,"onClick",dojo.hitch(this,_ce.clickFunction));}});}return _ca;},warn:function(msg){this.errorObj.innerHTML=msg;this.errorObj.style.display="";},hidWarn:function(){this.errorObj.innerHTML="";this.errorObj.style.display="none";},show:function(){if(this.dialogue){this.dialogue.show();}},hide:function(){if(this.dialogue){this.dialogue.hide();}},destroy:function(){if(this.dialogue){this.dialogue.destroy();}},onOK:function(e){var ok=this._check(e);if(ok){this.hide();this._onOK(e);}},onCancel:function(e){this.hide();this._onCancel(e);},onKeyPress:function(e){var _cf=e||window.event;this._onKeyPress(e);if(_cf.keyCode==dojo.keys.ENTER){this.onOK(e);return;}if(_cf.keyCode==dojo.keys.ESCAPE){this.onCancel(e);}},_check:function(e){return true;},_onOK:function(e){},_onCancel:function(e){},_onKeyPress:function(e){}});}if(!dojo._hasResource["window.widget.TextDialogue"]){dojo._hasResource["window.widget.TextDialogue"]=true;dojo.provide("window.widget.TextDialogue");dojo.declare("window.widget.TextDialogue",[dijit._Widget,dijit._Templated,common.widget.CommonDialogue],{templateString:"<div><span dojoAttachPoint='textNode'></span></div>",text:"",postCreate:function(){this.textNode.innerHTML=this.text;this.inherited(arguments);},createContent:function(){return this.domNode;}});}if(!dojo._hasResource["window.widget.Toolbar"]){dojo._hasResource["window.widget.Toolbar"]=true;dojo.provide("window.widget.Toolbar");dojo.declare("window.widget.Toolbar",[dijit._Widget,dijit._Templated],{templateString:"<div><span dojoAttachPoint='toolbarContainer'></span></div>",drawboard:null,postCreate:function(){var _d0=new dijit.Toolbar({},this.toolbarContainer),_d1=this.getDefinition()._arrayOfAllItems[0].children,_d2=drawboard.Constant.Toolbar,_d3,_d4,_d5=this,_d6,_d7;dojo.forEach(_d1,function(_d8){_d4=_d8.name[0];_d7=dojo.hitch(_d5,_d8.action[0]);switch(_d8.type&&_d8.type[0]){case _d2.COLORPALETTE:_d3=new dijit.form.DropDownButton({label:_d4,title:_d4,showLabel:true,dropDown:new dijit.ColorPalette({drawboard:_d5.drawboard,palette:"7x10",onChange:_d7})});break;case _d2.DROPDOWNLIST:_d6=_d8.list;if(!(_d6 instanceof Array)){var _d9=_d6.start,end=_d6.end,_d6=[];while(_d9<=end){_d6.push(_d9);_d9++;}}_d3=_d5.createDropDownList(_d6,_d5[_d8.action[0]],_d4,_d5.drawboard);break;case _d2.DIALOGUE:_d3=new dijit.form.Button({label:_d4,showLabel:false,title:_d4,iconClass:"dijitEditorIcon dijitEditorIcon toolbarIcon "+_d8.css[0],onClick:_d7});break;default:_d3=new dijit.form.Button({label:_d4,showLabel:false,title:_d4,iconClass:"dijitEditorIcon dijitEditorIcon toolbarIcon "+_d8.css[0],onClick:_d7});break;}_d3&&_d0.addChild(_d3);_d3=null;});},strokeWidth:function(e){this.drawboard.setStyle("stroke-width",this.label);},stroke:function(e){this.drawboard.setStyle("stroke",e);},fill:function(e){this.drawboard.setStyle("fill",e);},combine:function(e){this.drawboard.combine();},divide:function(e){this.drawboard.divide();},next:function(e){this.drawboard.redo();},previous:function(e){this.drawboard.undo();},save:function(e){},showContact:function(e){var _da="QQ:65265800";new window.widget.TextDialogue({text:_da}).show();},createDropDownList:function(_db,_dc,_dd,_de){var _df=new dijit.Menu({style:"display: none;"});dojo.forEach(_db,function(_e0){var _e1=new dijit.MenuItem({label:_e0,name:_e0,onClick:_dc,drawboard:_de});_df.addChild(_e1);},this);return new dijit.form.DropDownButton({label:_dd,dropDown:_df});},createDefinition:function(){this.definition=new dojo.data.ItemFileReadStore({url:drawboardRuntimeSetting.toolbarImgUrl});this.definition._forceLoad();},getDefinition:function(){if(!this.definition){this.createDefinition();}return this.definition;}});}if(!dojo._hasResource["window.widget.GraphChooseContainer"]){dojo._hasResource["window.widget.GraphChooseContainer"]=true;dojo.provide("window.widget.GraphChooseContainer");dojo.declare("window.widget.GraphChooseContainer",[dijit._Widget,dijit._Templated],{templateString:"<div></div>",definition:null,accordion:null,width:null,height:null,active:null,drawboard:null,overNode:null,clickCss:"graphClick",overCss:"graphOver",events:null,postCreate:function(){var _e2=[],_e3=this;(this.width)&&(_e2.push("width:"+this.width+";"));(this.height)&&(_e2.push("height:"+this.height+";"));var _e4=new dijit.layout.AccordionContainer({style:_e2.join(" ")}).placeAt(this.domNode);dojo.connect(_e4,"_showChild",function(){_e3.clearStatus();});_e4.startup();this.accordion=_e4;this.createContent();dojo.subscribe("/drawboard/mouseup",dojo.hitch(this,"clearStatus"));this.events=[dojo.connect(this.domNode,"onclick",this,this.doclick),dojo.connect(this.domNode,"onmousemove",this,this.domousemove)];},clearStatus:function(){this.drawboard.setDrawType(null);var _e5=this.active;if(_e5){dojo.removeClass(_e5,this.clickCss);this.active=null;}},getDefinition:function(){if(!this.definition){this.createDefinition();}return this.definition;},createDefinition:function(){this.definition=new dojo.data.ItemFileReadStore({url:drawboardRuntimeSetting.graphImgUrl});this.definition._forceLoad();},createContent:function(){var _e6=this.getDefinition(),_e7=_e6._arrayOfAllItems[0],_e8=this.createGraphContent;dojo.forEach(_e7.children,function(_e9,_ea){_e8.call(this,_e9,_ea);},this);},createGraphContent:function(_eb,_ec){var _ed=new dijit.layout.ContentPane({title:_eb.name[0]});_ed.containerNode.innerHTML=this.generateGraphContent(_eb);this.accordion.addChild(_ed);},generateGraphContent:function(_ee){var _ef=[],_f0;dojo.forEach(_ee.children,function(_f1){_f0=["<div id=",_f1.id[0]," name=",_f1.name[0]," title=",_f1.name[0],"",""," strategy='",_f1.strategy[0],"' class='graphIconContainer'><img src='",drawboardRuntimeSetting.blankGif,"' class='graphIcon ",(_ee.css||"")," ",_f1.css[0],"'/>","<span class='graphText'>",_f1.name[0],"</span></div>"];if(_f1.url){_f0[6]=" url='"+_f1.url[0]+"'";}if(_f1.ratio){_f0[7]=" ratio='"+_f1.ratio[0]+"'";}_ef.push(_f0.join(" "));},this);return _ef.join(" ");},getGraphNode:function(e){var _f2=e.target||e.srcElement;if(dojo.hasClass(_f2,"graphIconContainer")){return _f2;}else{if(dojo.hasClass(_f2,"graphIcon")||dojo.hasClass(_f2,"graphText")){return _f2.parentNode;}}return null;},destroyComponent:function(){dojo.forEach(this.events,dojo.disconnect);for(var _f3 in this){if(typeof _f3=="function"){continue;}if(this[_f3].destroyRecursive){this[_f3].destroyRecursive(true);}this[_f3]=null;delete this[_f3];}},setDrawboard:function(db){this.drawboard=db;},getDrawboard:function(){if(!this.drawboard){new common.exception.Exception({msg:"the drawboard doesn't exist!"});return;}return this.drawboard;},doclick:function(e){var _f4=this.getGraphNode(e),_f5,_f6,db,_f7={},tmp,_f8=false;if(!_f4){return;}_f5=this.clickCss;_f6=this.active;if(dojo.hasClass(_f4,_f5)||_f6==_f4){return;}_f6&&(dojo.removeClass(_f6,_f5));dojo.addClass(_f4,_f5);db=this.getDrawboard();db.setDrawType(dojo.attr(_f4,"strategy"));tmp=dojo.attr(_f4,"url");if(tmp){_f7.url=tmp;tmp=dojo.attr(_f4,"ratio");tmp&&(_f7.ratio=tmp);_f8=true;}_f8&&db.setGraphStrategyParam(_f7);this.active=_f4;},domousemove:function(e){var _f9=this.getGraphNode(e),_fa=this.overCss,_fb=this.overNode;if(!_f9){_fb&&(dojo.removeClass(_fb,_fa));this.overNode=null;return;}if(dojo.hasClass(_f9,_fa)||_fb==_f9){return;}_fb&&(dojo.removeClass(_fb,_fa));dojo.addClass(_f9,_fa);this.overNode=_f9;}});}if(!dojo._hasResource["window.widget.ToolbarContainer"]){dojo._hasResource["window.widget.ToolbarContainer"]=true;dojo.provide("window.widget.ToolbarContainer");dojo.declare("window.widget.ToolbarContainer",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"toolbar\" class=\"toolbar\">\r\n\t<div dojoAttachPoint=\"floatDiv\" class=\"toolbarFloatCover\"></div>\r\n\t<div dojoAttachPoint=\"containerNode\" class=\"toolbarContainer\"></div>\r\n</div>\r\n",contentBuilder:null,contentBuilderClass:"window.widget._ToolbarBuilder",floatDivAnimate:null,events:null,drawboard:null,widthUnit:36,left:3,top:3,postCreate:function(){this.inherited(arguments);this.contentBuilder=eval("new "+this.contentBuilderClass+"(this)");this.createContent();var _fc=this.floatDiv;_fc.style.display="none";this.floatDivAnimate=dojo.animateProperty({node:this.floatDiv,duration:1000,properties:{}});this.events=[dojo.connect(this.containerNode,"onclick",this,this.doContentEvent),dojo.connect(this.containerNode,"onmousemove",this,this.doContentEvent)];},createContent:function(){this.containerNode.innerHTML=this.contentBuilder.generateHTML();},getDefinition:function(){if(!this.definition){this.createDefinition();}return this.definition;},setDrawboard:function(db){this.drawboard=db;},getDrawboard:function(){if(!this.drawboard){new common.exception.Exception({msg:"the drawboard doesn't exist!"});return;}return this.drawboard;},createDefinition:function(){this.definition=new dojo.data.ItemFileReadStore({url:drawboardRuntimeSetting.toolbarImgUrl});this.definition._forceLoad();},doContentEvent:function(e){e.dispatch="do"+e.type;this._dispatch(e.dispatch,e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},getMenuNode:function(e){var _fd=e.target||e.srcElement;if(dojo.hasClass(_fd,"toolbarDiv")){return _fd.firstElementChild||_fd.childNodes.item(0);}if(dojo.hasClass(_fd,"toolbarIcon")){return _fd;}return null;},doclick:function(e){var _fe=this.getMenuNode(e),_ff;if(!_fe){return;}_ff=dojo.attr(_fe,"action");this.drawboard[dojo.trim(_ff)]();},domousemove:function(e){var node=this.getMenuNode(e),_100,_101,_102,left,s;if(!node){return;}_100=parseInt(dojo.attr(node,"index"));_101=this.floatDivAnimate;_101.stop();_102=this.floatDivAnimate.properties,left=_102.left;s=this.floatDiv.style;s.display="none";if(!left){_102.left={};_102.left.start=_102.left.end=this.widthUnit*_100+this.left;s.left=this.left+"px";s.top=this.top+"px";return;}_102.left.start=left.end;_102.left.end=this.widthUnit*_100+this.left;_101.play();return;},destroyComponent:function(){dojo.forEach(this.events,dojo.disconnect);for(var attr in this){if(typeof attr=="function"){continue;}if(this[attr].destroyRecursive){this[attr].destroyRecursive(true);}this[attr]=null;delete this[attr];}}});window.widget._ToolbarBuilder=dojo.extend(function(view){this.view=view;},{view:null,zIndex:900,_table:"<ul class=\"toolbarUL\">",constructor:function(view){this.view=view;},generateHTML:function(){var html=[this._table],root=this.view.getDefinition()._arrayOfAllItems[0],img;if(!root){return "";}dojo.forEach(root.children,function(item,_103){if(item){img=["<li class=\"toolbarDiv\">"];img.push(this.generateIMG(item,_103));img.push("</li>");html.push(img.join(" "));}},this);html.push("</ul>");return html.join(" ");},generateIMG:function(item,_104){var span=["<img index=",_104," class='toolbarIcon ",item.css[0],"'"," title='",item.title?item.title[0]:item.name[0],"'"," action='",item.action[0],"'"," src='",drawboardRuntimeSetting,"'","/>"];return span.join(" ");}});}if(!dojo._hasResource["drawboard.cache.ResourceCache"]){dojo._hasResource["drawboard.cache.ResourceCache"]=true;dojo.provide("drawboard.cache.ResourceCache");(function(){dojo.declare("drawboard.cache.ResourceCache",common.Cache,{createCache:function(){return {};},getResource:function(key){return this.getCache()[key];},addResource:function(key,_105){var _106=this.getCache();_106[key]=_105;},removeResource:function(key){var _107=this.getCache();_107[key]=null;delete _107[key];}});if(drawboard.resourceCenter==null){drawboard.resourceCenter=new drawboard.cache.ResourceCache();}})();}if(!dojo._hasResource["drawboard.graphic.CanvasGraphic"]){dojo._hasResource["drawboard.graphic.CanvasGraphic"]=true;dojo.provide("drawboard.graphic.CanvasGraphic");(function(){var _108=drawboard.Constant.Path,_109=window.location.pathname,_10a=_109.substring(0,_109.indexOf("/",1)+1);dojo.declare("drawboard.graphic.CanvasGraphic",null,{anchor:null,ctx:null,getContext:function(){if(!this.ctx){this.ctx=this.anchor.getContext("2d");}return this.ctx;},createAnchor:function(w,h){var node=dojo.create("canvas");w&&node.setAttribute("width",w);h&&node.setAttribute("height",h);node.wkWidget=this;this.anchor=node;return node;},setSize:function(w,h){var _10b=this.anchor;dojo.attr(_10b,"height",h);dojo.attr(_10b,"width",w);},setStyle:function(ct,_10c){if(!_10c){return;}var _10d=_10c.split(";"),s,_10e=[],_10f;dojo.forEach(_10d,function(item){s=item.split(":");switch(s[0]){case "fill":ct.fillStyle=s[1];_10f="fill";break;case "stroke":ct.strokeStyle=s[1];_10f="stroke";break;case "stroke-width":ct.lineWidth=s[1];_10f=null;break;case "":break;default:break;}(s[1]!="none")&&_10f&&_10e.push(_10f);},this);return function(){var pct=ct;dojo.forEach(_10e,function(item){pct[item]();},this);};},setAttrs:function(ct,_110){if(_110){var attr,_111;for(attr in _110){if(attr=="transform"){dojo.forEach(_110[attr],function(opt){_111=opt.indexOf("rotate");if(_111!=-1){opt.substr(rindex,opt.length-2-_111);return;}eval("ct."+opt+";");},this);}}}},drawLine:function(p1,p2,_112){var ct=this.getContext(),_113=this.setStyle(ct,_112);ct.moveTo(p1.x,p1.y);ct.lineTo(p2.x,p2.y);_113();},drawRect:function(_114,w,h,rx,_115,_116){var ct=this.getContext(),_117;ct.save();_117=this.setStyle(ct,_116);this.setAttrs(_115);ct.moveTo(_114.x+(w>0?rx:-rx),_114.y);ct.arcTo(_114.x+w,_114.y,_114.x+w,_114.y+h-rx,rx);ct.arcTo(_114.x+w,_114.y+h,_114.x+rx,_114.y+h,rx);ct.arcTo(_114.x,_114.y+h,_114.x,_114.y+rx,rx);ct.arcTo(_114.x,_114.y,_114.x+(w>0?rx:-rx),_114.y,rx);_117();ct.restore();},drawCircle:function(_118,r,_119){var ct=this.getContext(),_11a=this.setStyle(ct,_119);ct.beginPath();ct.arc(_118.x,_118.y,r,0,Math.PI*2,true);ct.closePath();_11a();},drawPath:function(_11b,_11c,open){var ct=this.getContext(),p,_11d=this.setStyle(ct,_11c);ct.beginPath();dojo.forEach(_11b,function(item,_11e){p=item.points;switch(item.command){case _108.MOVE:case _108.RMOVE:ct.moveTo(p.x,p.y);break;case _108.LINE:case _108.RLINE:ct.lineTo(p.x,p.y);break;case _108.NONE:default:break;}},this);!open&&ct.closePath();_11d();},drawImage:function(_11f,w,h,url,_120){var ct=this.getContext(),_121=drawboard.resourceCenter.getCache();ct.save();this.setAttrs(ct,_120);if(_121[url]){ct.drawImage(_121[url],_11f.x,_11f.y,w,h);}else{var img=new Image();img.onload=function(){ct.drawImage(img,_11f.x,_11f.y,w,h);_121[url]=img;};img.src=_10a+url;}ct.restore();},clear:function(){var ct=this.getContext(),_122=ct.canvas;ct.clearRect(0,0,_122.width,_122.height);}});})();}if(!dojo._hasResource["window.Entrance"]){dojo._hasResource["window.Entrance"]=true;dojo.provide("window.Entrance");(function(){var _123=common.calc.Geometry,_124=_123.rotation;window.Entrance={graphic:null,test:function(){this.graphic=drawboard.graphic.SVGGraphic;this.testGraphClassPanel();},createDrawboard:function(){var db=this.db,box=common.utils.BrowerUtils.getWindowBox(),div;if(!db){div=dojo.create("div",{},dojo.byId("graphNode"));div.style.width=box.w-191+"px";div.style.height=box.h-39+"px";div.style.border="1px solid black";this.db=new drawboard.DrawBoard({w:(box.w-191),h:(box.h-39),graphicClass:drawboard.graphic.SVGGraphic},dojo.create("div",null,div));}return this.db;},getZoomWindow:function(){if(!this.zoomWindow){var box=common.utils.BrowerUtils.getWindowBox(),db=this.createDrawboard(),div=dojo.create("div",{},dojo.byId("graphNode"),"last");div.style.height=db.h*0.5+4+"px";div.style.width=db.w*0.5+4+"px";div.style.border="1px solid black";div.style.position="relative";this.zoomWindow=new drawboard.ZoomDrawBoard({drawboard:db,w:db.w*0.5,h:db.h*0.5},dojo.create("div",{},div));}return this.zoomWindow;},testGraphClassPanel:function(){var box=common.utils.BrowerUtils.getWindowBox(),db=this.createDrawboard();dojo.byId("graphNode").style.width=(box.w-192)+"px";dojo.byId("graphNode").style.height=(box.h-30)+"px";new window.widget.GraphChooseContainer({width:"192px",height:(box.h-30)+"px",drawboard:db},dojo.create("div",null,dojo.byId("toolsNode")));new window.widget.Toolbar({drawboard:db},dojo.create("div",null,dojo.byId("navigator")));}};})();}dojo.i18n._preloadLocalizations("dojo.nls.window",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
