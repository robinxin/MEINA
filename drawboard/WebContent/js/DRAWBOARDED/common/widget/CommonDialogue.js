/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["common.widget.CommonDialogue"]){dojo._hasResource["common.widget.CommonDialogue"]=true;dojo.provide("common.widget.CommonDialogue");dojo.require("dijit.Dialog");dojo.require("dijit._Widget");dojo.require("dijit.form.Button");dojo.declare("common.widget.CommonDialogue",null,{dialogue:null,buttons:null,visible4Cancel:true,visible4OK:true,OKLabel:"确认",CancelLabel:"取消",okBtn:null,cancelBtn:null,contentCss:"DialogContent",title:null,warning:null,errCss:"DialogError",footCss:"DialogFoot",errorObj:null,constructor:function(_1){if(_1){dojo.mixin(this,_1);}},postCreate:function(){this.createDialogue();},createDialogue:function(){var _2=document.createElement("div");if(this.contentCss){dojo.addClass(_2,this.contentCss);}var _3=document.createElement("div");dojo.attr(_3,"style","overflow:auto;");_3.appendChild(this.createContent());_2.appendChild(_3);_2.appendChild(this.createFoot());this.dialogue=new dijit.Dialog({title:this.title,style:"overflow:visible;outline:none;"},_2);dojo.connect(this.dialogue,"onCancel",dojo.hitch(this,"onCancel"));dojo.connect(this.dialogue.domNode,"onkeypress",dojo.hitch(this,"onKeyPress"));},createContent:function(){},createFoot:function(){var _4=document.createElement("div");dojo.addClass(_4,this.footCss);var _5=document.createElement("div");dojo.addClass(_5,this.errCss);this.errorObj=_5;this.hidWarn();_4.appendChild(_5);if(this.visible4OK){var _6=new dijit.form.Button({label:this.OKLabel});_4.appendChild(_6.domNode);dojo.connect(_6,"onClick",dojo.hitch(this,"onOK"));this.okBtn=_6;}if(this.visible4Cancel){var _7=new dijit.form.Button({label:this.CancelLabel});_4.appendChild(_7.domNode);dojo.connect(_7,"onClick",dojo.hitch(this,"onCancel"));this.cancelBtn=_7;}if(this.buttons){dojo.forEach(this.buttons,function(_8){var _9=new dijit.form.Button({label:_8.label});_4.appendChild(_9.domNode);if(_8.clickFunction){dojo.connect(_9,"onClick",dojo.hitch(this,_8.clickFunction));}});}return _4;},warn:function(_a){this.errorObj.innerHTML=_a;this.errorObj.style.display="";},hidWarn:function(){this.errorObj.innerHTML="";this.errorObj.style.display="none";},show:function(){if(this.dialogue){this.dialogue.show();}},hide:function(){if(this.dialogue){this.dialogue.hide();}},destroy:function(){if(this.dialogue){this.dialogue.destroy();}},onOK:function(e){var ok=this._check(e);if(ok){this.hide();this._onOK(e);}},onCancel:function(e){this.hide();this._onCancel(e);},onKeyPress:function(e){var _b=e||window.event;this._onKeyPress(e);if(_b.keyCode==dojo.keys.ENTER){this.onOK(e);return;}if(_b.keyCode==dojo.keys.ESCAPE){this.onCancel(e);}},_check:function(e){return true;},_onOK:function(e){},_onCancel:function(e){},_onKeyPress:function(e){}});}