/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["drawboard.controller.StyleController"]){dojo._hasResource["drawboard.controller.StyleController"]=true;dojo.provide("drawboard.controller.StyleController");dojo.require("common.container.MapContainer");(function(){dojo.declare("drawboard.controller.StyleController",common.container.MapContainer,{_style:"fill:none;stroke:black;stroke-width:1",_activeStyle:"fill:none;stroke:red;stroke-width:1",resultIdentity:"serializeStr",actives:null,activedGp:null,setActives:function(_1,gp){this.actives=_1;this.activedGp&&this.activedGp.isActived(false);gp&&gp.isActived(true)&&(this.activedGp=gp);},getActives:function(){return this.actives;},init:function(_2){this._style=_2;},getDefaultStyle:function(){return this._style;},getTextStyle:function(gp){var gs=this.getItem(gp.getIdty());if(!gs){return "";}return gs[this.resultIdentity];},getGraphStyle:function(gp){var gs=this.getItem(gp.getIdty());if(!gs){return this.getDefaultStyle(gp);}return gs[this.resultIdentity];},getGraphStyleValue:function(gp,_3){var _4=this.getItem(gp.getIdty());if(_4){return _4[_3];}return null;},containGraphStyle:function(gp){var gs=this.getItem(gp.getIdty());if(!gs){return false;}return true;},addGraphStyle:function(gp,_5,_6,_7){if(gp.isComposite()){return;}var gs=this.getItem(gp.getIdty());if(!gs){gs={};this.addItem(gp.getIdty(),gs);}gs[_5]=_6;gs[this.resultIdentity]=this.serialize(gs,_7);},removeGraphStyle:function(gp,_8){if(gp.isComposite()){return;}var gs=this.getItem(gp.getIdty());if(!gs||!gs[_8]){return;}delete gs[_8];gs[this.resultIdentity]=this.serialize(gs);},removeGraph:function(gp){var _9=gp.getIdty(),gs=this.getItem(_9);if(!gs){return;}this.removeItem(_9);},serialize:function(sj,_a){var _b=[];for(var _c in sj){if(_c!=this.resultIdentity){_b.push([_c,":",sj[_c]].join(""));}}if(!_a){if(!sj["stroke"]){_b.push(["stroke",":","black"].join(""));}if(!sj["stroke-width"]){_b.push(["stroke-width",":","1"].join(""));}if(!sj["fill"]){_b.push(["fill",":","none"].join(""));}}return _b.join(";");},getStyle:function(_d,gp,d){var _e=this.getActives(),_f=false;if(d&&_e){dojo.some(_e,function(_10){if(_10.equal(d)){_f=true;}},this);if(_f){return this._activeStyle;}}return this.getGraphStyle(gp);}});})();}