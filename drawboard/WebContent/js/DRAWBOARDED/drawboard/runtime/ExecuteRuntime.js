/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["drawboard.runtime.ExecuteRuntime"]){dojo._hasResource["drawboard.runtime.ExecuteRuntime"]=true;dojo.provide("drawboard.runtime.ExecuteRuntime");dojo.require("drawboard.context.ExecuteContext");dojo.require("common.exception.Exception");dojo.require("common.listener.Listener");dojo.require("common.Cache");dojo.require("dijit._Widget");dojo.declare("drawboard.runtime.ExecuteRuntime",[dijit._Widget,common.Cache,common.listener.Listener],{context:null,graphic:null,_showMark:false,setShowMark:function(_1){this._showMark=_1;},getShowMark:function(){return this._showMark;},apply:function(_2,_3){this[_2]&&this[_2].apply(this,_3);},createCache:function(){return {};},getCache:function(gp){var _4=drawboard.runtime.ExecuteRuntime.superclass.getCache.apply(this),_5=_4[gp.getIdty()];(!_5)&&(_4[gp.getIdty()]=_5={});return _5;},addCache:function(gp,_6,_7){var _8=drawboard.runtime.ExecuteRuntime.superclass.getCache.apply(this),_9=_8[gp.getIdty()];(!_9)&&(_8[gp.getIdty()]=_9={});_9[_6]=_7;},clearCache:function(gp,_a){var _b=drawboard.runtime.ExecuteRuntime.superclass.getCache.apply(this);if(_a!==undefined&&_a!==null){var _c=_b[gp.getIdty()];if(_c){_c[_a]=null;delete _c[_a];}this.fireListener(["clearCache",[gp,_a]]);return;}_b[gp.getIdty()]=null;delete _b[gp.getIdty()];this.fireListener(["clearCache",[gp]]);},getContext:function(){if(!this.context){new common.exception.Exception({msg:"the context in runtime doesnt' exist!"});}return this.context;},setContext:function(_d){this.context=_d;},getGraphic:function(){if(!this.graphic){new common.exception.Exception({msg:"the graphic in runtime doesnt' exist!"});}return this.graphic;},setGraphic:function(gf){this.graphic=gf;},getDistance:function(){var _e=this.getContext();return _e.getParamsCtrl().getDistance();},getRotateDistance:function(){var _f=this.getContext();return _f.getParamsCtrl().getRotateDistance();},getRounder:function(){var ctx=this.getContext();return ctx.getParamsCtrl().getRounder();},getDrawProcessor:function(){return this.getContext().getDrawProcessor();},draw:function(gp){this.getDrawProcessor().draw(gp,this);},zoom:function(gp,_10){gp.zoom(_10,this);}});}