/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["drawboard.graph.strategy.SquareStrategy"]){dojo._hasResource["drawboard.graph.strategy.SquareStrategy"]=true;dojo.provide("drawboard.graph.strategy.SquareStrategy");dojo.require("drawboard.graph.strategy.GraphStrategy");(function(){var _1=common.calc.Geometry,_2=drawboard.Constant;dojo.declare("drawboard.graph.strategy.SquareStrategy",drawboard.graph.strategy.GraphStrategy,{isIn:function(gp,_3,_4){return _1.isPointInPolyn(gp.getGraphCoordinates(_4),_3);},draw:function(gp,gf,_5){var p=_2.Path,_6=gp.getGraphCoordinates(_5);gf.drawPath([{command:p.MOVE,points:_6[0]},{command:p.LINE,points:_6[1]},{command:p.LINE,points:_6[2]},{command:p.LINE,points:_6[3]}],this.getStyle(gp,_5));},getGraphCoordinates:function(gp,_7){var _8=gp.getCoordinate(_7),w=gp.getWidth(_7),h=gp.getHeight(_7),_9=w>h?h:w,x=_8.x,y=_8.y;gp.setWidth(_9,_7);gp.setHeight(_9,_7);return [{x:x,y:y},{x:x+_9,y:y},{x:x+_9,y:y+_9},{x:x,y:y+_9}];},sizeChange:function(gp,_a,_b,_c){var d=_2.Direction,p=gp.getCoordinate(_c),w=gp.getWidth(_c),h=gp.getHeight(_c),_d=w>h?h:w,_e=_a.getDirect();switch(_e){case d.NORTH:_b=_b.y;gp.setCoordinate({x:p.x+(_b>>1),y:p.y+(_b)},_c);gp.setWidth(_d-(_b),_c);gp.setHeight(_d-(_b),_c);break;case d.WESTNORTH:_b=Math.abs(_b.x)>Math.abs(_b.y)?_b.y:_b.x,gp.setCoordinate({x:p.x+_b,y:p.y+_b},_c);gp.setWidth(_d-_b,_c);gp.setHeight(_d-_b,_c);break;case d.EASTNORTH:_b=_b.y;gp.setCoordinate({x:p.x,y:p.y+_b},_c);gp.setWidth(_d-_b,_c);gp.setHeight(_d-_b,_c);break;case d.SOUTH:_b=_b.y;gp.setCoordinate({x:p.x-(_b>>1),y:p.y},_c);gp.setWidth(_d+(_b),_c);gp.setHeight(_d+(_b),_c);break;case d.EASTSOUTH:_b=Math.abs(_b.x)>Math.abs(_b.y)?_b.y:_b.x,gp.setCoordinate({x:p.x,y:p.y},_c);gp.setWidth(_d+_b,_c);gp.setHeight(_d+_b,_c);break;case d.WESTSOUTH:_b=_b.x;gp.setCoordinate({x:p.x+_b,y:p.y},_c);gp.setWidth(_d-_b,_c);gp.setHeight(_d-_b,_c);break;case d.WEST:_b=_b.x;gp.setCoordinate({x:p.x+_b,y:p.y+(_b>>1)},_c);gp.setWidth(_d-(_b),_c);gp.setHeight(_d-(_b),_c);break;case d.EAST:_b=_b.x;gp.setCoordinate({x:p.x,y:p.y-(_b>>1)},_c);gp.setWidth(_d+(_b),_c);gp.setHeight(_d+(_b),_c);break;case d.END:break;default:break;}}});})();}