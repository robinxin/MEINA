/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["drawboard.graph.decorate.controller.RotatorController"]){dojo._hasResource["drawboard.graph.decorate.controller.RotatorController"]=true;dojo.provide("drawboard.graph.decorate.controller.RotatorController");dojo.require("drawboard.graph.decorate.controller.Controller");dojo.require("drawboard.graph.decorate.Rotator");dojo.require("common.calc.Geometry");(function(){var _1=common.calc.Geometry;dojo.declare("drawboard.graph.decorate.controller.RotatorController",drawboard.graph.decorate.controller.Controller,{type:drawboard.Constant.Decorate.ROTATOR,draw:function(gp,_2){if(!gp.hasRotator()){return;}var _3=gp.getRotatorCoordinates(_2),_4;_4=gp.getRotator(_2);_4=new drawboard.graph.decorate.Rotator({pole:_4.coordinate,angle:_4.angle,coordinate:_3});_4.draw(_2.getGraphic(),this.getStyle(gp,_4,_2),_2);},active:function(gp,_5,_6){if(!gp.hasRotator()){return null;}var _7;if(this.isIn(gp,_5,_6)){_7=gp.getRotator(_6);_7=new drawboard.graph.decorate.Rotator({coordinate:gp.getRotatorCoordinates(_6),pole:_7.pole,angle:_7.angle});}return _7;},isIn:function(gp,_8,_9){if(!gp.hasRotator()){return false;}var r=_9.getDistance(),_a=gp.getRotatorCoordinates(_9);if(_1.isPointInCircle(_8,{coordinate:_a[3],r:r})||_1.isPointInCircle(_8,{coordinate:_a[5],r:r})||_1.isPointInSegment(_a[1],_a[4],_8)){return true;}return false;},isInPole:function(gp,_b,_c){if(!gp.hasRotator()){return false;}var _d=gp.getRotatorCoordinates(_c);if(_1.isPointInCircle(_b,{coordinate:_d[3],r:_c.getDistance()})){return true;}return false;}});if(!drawboard.rotatorController){drawboard.rotatorController=new drawboard.graph.decorate.controller.RotatorController();}})();}